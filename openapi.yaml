openapi: 3.0.3
info:
  title: API
  version: 1.0.0
paths:
  /brew:
    get:
      tags:
        - brew
      operationId: getBrew
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
  /brews/:
    get:
      tags:
        - brews
      operationId: getBrews
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
    post:
      tags:
        - brews
      operationId: postBrews
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
  /brews/{brewId}/steeps:
    get:
      tags:
        - brews
      operationId: getBrewsBybrewidSteeps
      parameters:
        - name: brewId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
    post:
      tags:
        - brews
      operationId: postBrewsBybrewidSteeps
      parameters:
        - name: brewId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
  /brews/{id}:
    get:
      tags:
        - brews
      operationId: getBrewsByid
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
    delete:
      tags:
        - brews
      operationId: deleteBrewsByid
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
    patch:
      tags:
        - brews
      operationId: patchBrewsByid
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
  /health/:
    get:
      tags:
        - health
      operationId: getHealth
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
  /health/live:
    get:
      tags:
        - health
      operationId: getHealthLive
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
  /health/ready:
    get:
      tags:
        - health
      operationId: getHealthReady
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
  /teapots/:
    get:
      tags:
        - teapots
      operationId: getTeapots
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
    post:
      tags:
        - teapots
      operationId: postTeapots
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
  /teapots/{id}:
    get:
      tags:
        - teapots
      operationId: getTeapotsByid
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
    put:
      tags:
        - teapots
      operationId: putTeapotsByid
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
    delete:
      tags:
        - teapots
      operationId: deleteTeapotsByid
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
    patch:
      tags:
        - teapots
      operationId: patchTeapotsByid
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
  /teapots/{teapotId}/brews:
    get:
      tags:
        - teapots
      operationId: getTeapotsByteapotidBrews
      parameters:
        - name: teapotId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
  /teas/:
    get:
      tags:
        - teas
      operationId: getTeas
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
    post:
      tags:
        - teas
      operationId: postTeas
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
  /teas/{id}:
    get:
      tags:
        - teas
      operationId: getTeasByid
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
    put:
      tags:
        - teas
      operationId: putTeasByid
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
    delete:
      tags:
        - teas
      operationId: deleteTeasByid
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
    patch:
      tags:
        - teas
      operationId: patchTeasByid
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "400":
          description: Bad request
        "500":
          description: Internal server error
components:
  schemas:
    BrewIdParamSchema:
      type: object
      title: BrewIdParamSchema
      properties:
        brewId:
          type: string
          format: uuid
      required:
        - brewId
    BrewQuerySchema:
      type: object
      title: BrewQuerySchema
      properties:
        limit:
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        page:
          type: integer
          default: 1
          minimum: 1
        status: {}
        teaId:
          type: string
          format: uuid
        teapotId:
          type: string
          format: uuid
      required:
        - page
        - limit
    BrewSchema:
      type: object
      title: BrewSchema
      properties:
        completedAt:
          type: string
          format: date-time
          nullable: true
        createdAt:
          type: string
          format: date-time
        id:
          type: string
          format: uuid
        notes:
          type: string
          nullable: true
          maxLength: 500
        startedAt:
          type: string
          format: date-time
        status: {}
        teaId:
          type: string
          format: uuid
        teapotId:
          type: string
          format: uuid
        updatedAt:
          type: string
          format: date-time
        waterTempCelsius:
          type: integer
          minimum: 60
          maximum: 100
      required:
        - id
        - teapotId
        - teaId
        - status
        - waterTempCelsius
        - notes
        - startedAt
        - completedAt
        - createdAt
        - updatedAt
    BrewStatusSchema:
      type: string
      title: BrewStatusSchema
      enum:
        - preparing
        - steeping
        - ready
        - served
        - cold
    CaffeineLevelSchema:
      type: string
      title: CaffeineLevelSchema
      enum:
        - none
        - low
        - medium
        - high
    CreateBrewSchema:
      type: object
      title: CreateBrewSchema
      properties:
        notes:
          type: string
          nullable: true
          maxLength: 500
        teaId:
          type: string
          format: uuid
        teapotId:
          type: string
          format: uuid
        waterTempCelsius:
          type: integer
          minimum: 60
          maximum: 100
      required:
        - teapotId
        - teaId
        - notes
    CreateSteepSchema:
      type: object
      title: CreateSteepSchema
      properties:
        durationSeconds:
          type: integer
          minimum: 1
        notes:
          type: string
          nullable: true
          maxLength: 200
        rating:
          type: integer
          nullable: true
          minimum: 1
          maximum: 5
      required:
        - durationSeconds
        - rating
        - notes
    CreateTeaSchema:
      type: object
      title: CreateTeaSchema
      properties:
        caffeineLevel: {}
        description:
          type: string
          nullable: true
          maxLength: 1000
        name:
          type: string
          minLength: 1
          maxLength: 100
        origin:
          type: string
          maxLength: 100
        steepTempCelsius:
          type: integer
          minimum: 60
          maximum: 100
        steepTimeSeconds:
          type: integer
          minimum: 1
          maximum: 600
        type: {}
      required:
        - name
        - type
        - caffeineLevel
        - steepTempCelsius
        - steepTimeSeconds
        - description
    CreateTeapotSchema:
      type: object
      title: CreateTeapotSchema
      properties:
        capacityMl:
          type: integer
          minimum: 1
          maximum: 5000
        description:
          type: string
          nullable: true
          maxLength: 500
        material: {}
        name:
          type: string
          minLength: 1
          maxLength: 100
        style: {}
      required:
        - name
        - material
        - capacityMl
        - style
        - description
    ErrorSchema:
      type: object
      title: ErrorSchema
      properties:
        code:
          type: string
        details:
          type: object
          additionalProperties:
            type: string
        message:
          type: string
      required:
        - code
        - message
    HealthCheckSchema:
      type: object
      title: HealthCheckSchema
      properties:
        latencyMs:
          type: number
        message:
          type: string
        name:
          type: string
        status:
          type: string
          enum:
            - ok
            - degraded
            - down
      required:
        - name
        - status
    HealthResponseSchema:
      type: object
      title: HealthResponseSchema
      properties:
        checks:
          type: array
          items: {}
        status:
          type: string
          enum:
            - ok
            - degraded
            - down
        timestamp:
          type: string
          format: date-time
        version:
          type: string
      required:
        - status
        - timestamp
    PaginationQuerySchema:
      type: object
      title: PaginationQuerySchema
      properties:
        limit:
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        page:
          type: integer
          default: 1
          minimum: 1
      required:
        - page
        - limit
    PaginationSchema:
      type: object
      title: PaginationSchema
      properties:
        limit:
          type: integer
          minimum: 1
          maximum: 100
        page:
          type: integer
          minimum: 1
        total:
          type: integer
          minimum: 0
        totalPages:
          type: integer
          minimum: 0
      required:
        - page
        - limit
        - total
        - totalPages
    PatchBrewSchema:
      type: object
      title: PatchBrewSchema
      properties:
        completedAt:
          type: string
          format: date-time
          nullable: true
        notes:
          type: string
          nullable: true
          maxLength: 500
        status: {}
    PatchTeaSchema:
      type: object
      title: PatchTeaSchema
      properties:
        caffeineLevel: {}
        description:
          type: string
          nullable: true
          maxLength: 1000
        name:
          type: string
          minLength: 1
          maxLength: 100
        origin:
          type: string
          maxLength: 100
        steepTempCelsius:
          type: integer
          minimum: 60
          maximum: 100
        steepTimeSeconds:
          type: integer
          minimum: 1
          maximum: 600
        type: {}
    PatchTeapotSchema:
      type: object
      title: PatchTeapotSchema
      properties:
        capacityMl:
          type: integer
          minimum: 1
          maximum: 5000
        description:
          type: string
          nullable: true
          maxLength: 500
        material: {}
        name:
          type: string
          minLength: 1
          maxLength: 100
        style: {}
    SteepSchema:
      type: object
      title: SteepSchema
      properties:
        brewId:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        durationSeconds:
          type: integer
          minimum: 1
        id:
          type: string
          format: uuid
        notes:
          type: string
          nullable: true
          maxLength: 200
        rating:
          type: integer
          nullable: true
          minimum: 1
          maximum: 5
        steepNumber:
          type: integer
          minimum: 1
      required:
        - id
        - brewId
        - steepNumber
        - durationSeconds
        - rating
        - notes
        - createdAt
    TeaQuerySchema:
      type: object
      title: TeaQuerySchema
      properties:
        caffeineLevel: {}
        limit:
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        page:
          type: integer
          default: 1
          minimum: 1
        type: {}
      required:
        - page
        - limit
    TeaSchema:
      type: object
      title: TeaSchema
      properties:
        caffeineLevel: {}
        createdAt:
          type: string
          format: date-time
        description:
          type: string
          nullable: true
          maxLength: 1000
        id:
          type: string
          format: uuid
        name:
          type: string
          minLength: 1
          maxLength: 100
        origin:
          type: string
          maxLength: 100
        steepTempCelsius:
          type: integer
          minimum: 60
          maximum: 100
        steepTimeSeconds:
          type: integer
          minimum: 1
          maximum: 600
        type: {}
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - name
        - type
        - caffeineLevel
        - steepTempCelsius
        - steepTimeSeconds
        - description
        - createdAt
        - updatedAt
    TeaTypeSchema:
      type: string
      title: TeaTypeSchema
      enum:
        - green
        - black
        - oolong
        - white
        - puerh
        - herbal
        - rooibos
    TeapotIdParamSchema:
      type: object
      title: TeapotIdParamSchema
      properties:
        teapotId:
          type: string
          format: uuid
      required:
        - teapotId
    TeapotMaterialSchema:
      type: string
      title: TeapotMaterialSchema
      enum:
        - ceramic
        - cast-iron
        - glass
        - porcelain
        - clay
        - stainless-steel
    TeapotQuerySchema:
      type: object
      title: TeapotQuerySchema
      properties:
        limit:
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        material: {}
        page:
          type: integer
          default: 1
          minimum: 1
        style: {}
      required:
        - page
        - limit
    TeapotResponseSchema:
      type: object
      title: TeapotResponseSchema
      properties:
        error:
          type: string
          enum:
            - I'm a teapot
        message:
          type: string
        spec:
          type: string
          format: uri
      required:
        - error
        - message
        - spec
    TeapotSchema:
      type: object
      title: TeapotSchema
      properties:
        capacityMl:
          type: integer
          minimum: 1
          maximum: 5000
        createdAt:
          type: string
          format: date-time
        description:
          type: string
          nullable: true
          maxLength: 500
        id:
          type: string
          format: uuid
        material: {}
        name:
          type: string
          minLength: 1
          maxLength: 100
        style: {}
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - name
        - material
        - capacityMl
        - style
        - description
        - createdAt
        - updatedAt
    TeapotStyleSchema:
      type: string
      title: TeapotStyleSchema
      enum:
        - kyusu
        - gaiwan
        - english
        - moroccan
        - turkish
        - yixing
    UpdateTeaSchema:
      type: object
      title: UpdateTeaSchema
      properties:
        caffeineLevel: {}
        description:
          type: string
          nullable: true
          maxLength: 1000
        name:
          type: string
          minLength: 1
          maxLength: 100
        origin:
          type: string
          maxLength: 100
        steepTempCelsius:
          type: integer
          minimum: 60
          maximum: 100
        steepTimeSeconds:
          type: integer
          minimum: 1
          maximum: 600
        type: {}
      required:
        - name
        - type
        - caffeineLevel
        - steepTempCelsius
        - steepTimeSeconds
        - description
    UpdateTeapotSchema:
      type: object
      title: UpdateTeapotSchema
      properties:
        capacityMl:
          type: integer
          minimum: 1
          maximum: 5000
        description:
          type: string
          nullable: true
          maxLength: 500
        material: {}
        name:
          type: string
          minLength: 1
          maxLength: 100
        style: {}
      required:
        - name
        - material
        - capacityMl
        - style
        - description
    UuidParamSchema:
      type: object
      title: UuidParamSchema
      properties:
        id:
          type: string
          format: uuid
      required:
        - id
